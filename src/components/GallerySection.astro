---
const { title, items = [], category = "general" } = Astro.props;

if (!items || !items.length) return null;
---
<div class={`gallery-category category-${category}`}>
  <h3 class="category-title">{title}</h3>
  
  <div class="gallery-mosaic">
    {items.map((img: any, index: number) => {
      const fallbackAlt = `${title} - Imagen ${index + 1}`;
      const altText = img.alt || fallbackAlt;
      const url = img.url ?? "";
      const isPdf = url.toLowerCase().endsWith(".pdf");

      if (isPdf) {
        return (
          <a
            href={url}
            class={`mosaic-item pdf ${index === 0 ? "main" : "thumb"}`}
            title={altText}
            target="_blank"
            rel="noreferrer"
          >
            <div class="pdf-card">
              <span class="pdf-label">Plano PDF</span>
              <span class="pdf-action">Abrir plano</span>
            </div>
          </a>
        );
      }

      return (
        <a
          href={url}
          class={`mosaic-item ${index === 0 ? "main" : "thumb"}`}
          data-lightbox="property"
          title={altText}
        >
          <img
            src={url}
            alt={altText}
            loading="lazy"
            decoding="async"
          />
          <div class="mosaic-overlay">
            <span>Ver en grande</span>
          </div>
        </a>
      );
    })}
  </div>
</div>

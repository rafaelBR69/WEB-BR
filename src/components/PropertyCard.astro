---
import { formatPrice } from "@/utils/formatters";
import {
  formatArea,
  formatOrientation,
  formatPropertyType,
} from "@/utils/presentation";
import FeatureBadge from "@/components/FeatureBadge.astro";

const { data, lang } = Astro.props;
---

<article class="property-card">

  <header class="header">
    <h2 class="title">
      <a href={`/${lang}/property/${data.slug}`}>
        {data.title}
      </a>
    </h2>

    {data.price && (
      <p class="price">
        {formatPrice(data.price, data.currency, lang)}
      </p>
    )}
  </header>

  <ul class="meta">
    {data.details.bedrooms && (
      <li>{data.details.bedrooms} hab</li>
    )}

    {data.details.bathrooms && (
      <li>{data.details.bathrooms} ba√±os</li>
    )}

    {formatArea(data.details.area_m2, lang) && (
      <li>{formatArea(data.details.area_m2, lang)}</li>
    )}

    {formatOrientation(data.details.orientation, lang) && (
      <li>{formatOrientation(data.details.orientation, lang)}</li>
    )}

    {formatPropertyType(data.details.type, lang) && (
      <li>{formatPropertyType(data.details.type, lang)}</li>
    )}
  </ul>

  {data.features.length > 0 && (
    <div class="features">
      {data.features.map((f) => (
        <FeatureBadge icon={f.icon} label={f.label} />
      ))}
    </div>
  )}

</article>
